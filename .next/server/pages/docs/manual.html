<!DOCTYPE html><html><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width" data-next-head=""/><noscript data-n-css=""></noscript><script defer="" noModule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-8cac0b4b405cede1.js" defer=""></script><script src="/_next/static/chunks/framework-b1e5f14688f9ffe6.js" defer=""></script><script src="/_next/static/chunks/main-953f8078176d6f7b.js" defer=""></script><script src="/_next/static/chunks/pages/_app-9ccadb934b519984.js" defer=""></script><script src="/_next/static/chunks/222-531750a62c465700.js" defer=""></script><script src="/_next/static/chunks/pages/docs/manual-41578c46711f4de7.js" defer=""></script><script src="/_next/static/6Q0J7OFGcBzm-2HOKiHsi/_buildManifest.js" defer=""></script><script src="/_next/static/6Q0J7OFGcBzm-2HOKiHsi/_ssgManifest.js" defer=""></script><style id="__jsx-7340e8986b2eb7dd">.code-container.jsx-7340e8986b2eb7dd{position:relative;background:#1e1e1e;border-radius:8px;padding:16px;margin-top:1rem;overflow-x:auto}.code-container.jsx-7340e8986b2eb7dd pre.jsx-7340e8986b2eb7dd{margin:0;color:#fff;font-family:"Courier New",monospace;font-size:.9rem;line-height:1.5}.copy-btn.jsx-7340e8986b2eb7dd{position:absolute;top:10px;right:10px;background:#2563eb;color:white;border:none;padding:6px 12px;border-radius:4px;cursor:pointer;font-size:.8rem;transition:background.2s ease}.copy-btn.jsx-7340e8986b2eb7dd:hover{background:#1d4ed8}</style><style id="__jsx-60e11466ec99cf58">.doc-page.jsx-60e11466ec99cf58{max-width:800px;margin:40px auto;padding:24px;background:#f8fbff;border-radius:12px;box-shadow:0 2px 12px rgba(34,90,180,.1);font-family:system-ui,sans-serif}.back-link.jsx-60e11466ec99cf58{display:inline-block;margin-bottom:20px;color:#2563eb;text-decoration:none}.doc-title.jsx-60e11466ec99cf58{font-size:2rem;color:#2563eb;margin-bottom:10px}.doc-description.jsx-60e11466ec99cf58{font-size:1.1rem;color:#374151;margin-bottom:20px}.doc-content.jsx-60e11466ec99cf58{line-height:1.6;color:#1f2937}</style></head><body><div id="__next"><div class="jsx-60e11466ec99cf58 doc-page"><a class="back-link" href="/">Home</a><h1 class="jsx-60e11466ec99cf58 doc-title">Non CI/CD</h1><div class="jsx-60e11466ec99cf58 doc-content"><h2 class="jsx-7340e8986b2eb7dd">Overview</h2><p class="jsx-7340e8986b2eb7dd">The detailed Non CI/CD process is good for development but not recommended for production.</p><h2 class="jsx-7340e8986b2eb7dd">Steps</h2><ul class="jsx-7340e8986b2eb7dd"><li class="jsx-7340e8986b2eb7dd">Step 1: Prepare deployment artifacts.</li><li class="jsx-7340e8986b2eb7dd">Step 2: Execute deployment commands manually.</li><li class="jsx-7340e8986b2eb7dd">Step 3: Verify deployment and monitor logs.</li></ul><h2 class="jsx-7340e8986b2eb7dd">Deployment Script (Sanitized)</h2><div class="jsx-7340e8986b2eb7dd code-container"><button class="jsx-7340e8986b2eb7dd copy-btn">Copy</button><pre class="jsx-7340e8986b2eb7dd"><code class="jsx-7340e8986b2eb7dd">#!/usr/bin/env bash

set -euo pipefail

REPO_DIR=&quot;$(cd &quot;$(dirname &quot;$0&quot;)&quot; &amp;&amp; pwd)&quot;
BRANCH=&quot;tnapex-dev&quot;

# -------------------------------
# üîß Configurable Variables
# -------------------------------
PM2_PROCESS=&quot;0&quot;                       # PM2 process id or name
REMOTE_USER=&quot;root | ubuntu | ec2-user&quot; # SSH username
REMOTE_HOST=&quot;&lt;SERVER_IP&gt;&quot;             # Server IP
REMOTE_PORT=&quot;22&quot;                      # SSH port 
REMOTE_PATH=&quot;&lt;DOCUMENT_PATH&gt;&quot;         # Deployment path on server
REMOTE_PASS=&quot;&lt;SERVER_PASSWORD&gt;&quot;       # Server password
GIT_USERNAME=&quot;&lt;GITHUB_USERNAME&gt;&quot;
GIT_TOKEN=&quot;&lt;GITHUB_TOKEN&gt;&quot;

# -------------------------------
# 1Ô∏è‚É£ Local Build
# -------------------------------
cd &quot;$REPO_DIR&quot;

mkdir -p dist_backup
if [ -d dist ]; then
  ts=$(date +%F_%H-%M-%S)
  BACKUP_ZIP=&quot;dist_backup/dist_${ts}.zip&quot;
  echo &quot;üì¶ Creating backup: ${BACKUP_ZIP}&quot;
  zip -r &quot;${BACKUP_ZIP}&quot; dist &gt; /dev/null &amp;&amp; echo &quot;‚úÖ Backup created&quot;
fi

rm -f dist.zip &amp;&amp; echo &quot;üóëÔ∏è Old dist.zip removed&quot;
rm -rf dist &amp;&amp; echo &quot;üßπ Old dist/ removed&quot;

echo &quot;üì• Pulling latest code...&quot;
git pull https://${GIT_USERNAME}:${GIT_TOKEN}@github.com/&lt;REPO_USER&gt;/&lt;REPO_NAME&gt;.git ${BRANCH}
echo &quot;‚úÖ Git pull success&quot;

export NVM_DIR=&quot;$HOME/.nvm&quot;
[ -s &quot;$NVM_DIR/nvm.sh&quot; ] &amp;&amp; . &quot;$NVM_DIR/nvm.sh&quot;
nvm use 22.18.0
echo &quot;‚úÖ Local Node version: $(node -v)&quot;

read -rp &quot;‚ñ∂Ô∏è Run local npm install? [Y/N]: &quot; run_local_npm
if [[ &quot;$run_local_npm&quot; =~ ^[Yy]$ ]]; then
  npm install
  echo &quot;‚úÖ Local npm install done&quot;
else
  echo &quot;‚Üí Skipped local npm install&quot;
fi

read -rp &quot;‚ñ∂Ô∏è Proceed with build? [Y/N]: &quot; yn
if [[ &quot;$yn&quot; =~ ^[Nn]$ ]]; then
  echo &quot;üõë Build cancelled&quot;
  exit 0
fi

echo &quot;üèóÔ∏è Running npm run build...&quot;
npm run build
echo &quot;‚úÖ Build succeeded&quot;

DIST_ZIP=&quot;dist.zip&quot;
zip -r &quot;${DIST_ZIP}&quot; dist &gt; /dev/null
echo &quot;‚úÖ dist.zip created&quot;

read -rp &quot;‚ñ∂Ô∏è Run npm install on server? [Y/N]: &quot; RUN_NPM_INSTALL
read -rp &quot;‚ñ∂Ô∏è Update .env file on server? [Y/N]: &quot; UPDATE_ENV

echo &quot;üì§ Uploading dist.zip to server...&quot;
sshpass -p &quot;${REMOTE_PASS}&quot; scp -o StrictHostKeyChecking=no -P &quot;${REMOTE_PORT}&quot; &quot;${DIST_ZIP}&quot; &quot;${REMOTE_USER}@${REMOTE_HOST}:${REMOTE_PATH}/&quot;
echo &quot;‚úÖ dist.zip uploaded&quot;

sshpass -p &quot;${REMOTE_PASS}&quot; ssh -o StrictHostKeyChecking=no -p &quot;${REMOTE_PORT}&quot; &quot;${REMOTE_USER}@${REMOTE_HOST}&quot; bash -s &lt;&lt; &#x27;EOF&#x27;
set -e
cd &#x27;$REMOTE_PATH&#x27;
echo &quot;üìå Current directory: $(pwd)&quot;

[ -d dist ] &amp;&amp; rm -rf dist &amp;&amp; echo &quot;‚úÖ Old dist removed&quot;

if [ -f dist.zip ]; then
  echo &quot;üìÇ Extracting new dist...&quot;
  unzip -q dist.zip -d .
  rm -f dist.zip
  echo &quot;‚úÖ New dist deployed&quot;
else
  echo &quot;‚ùå dist.zip not found!&quot;
  exit 1
fi

export NVM_DIR=&quot;$HOME/.nvm&quot;
[ -s &quot;$NVM_DIR/nvm.sh&quot; ] &amp;&amp; . &quot;$NVM_DIR/nvm.sh&quot;
nvm use 22.18.0
echo &quot;‚úÖ Server Node version: $(node -v)&quot;

if [[ &quot;$RUN_NPM_INSTALL&quot; =~ ^[Yy]$ ]]; then
  echo &quot;üì¶ Running npm install on server...&quot;
  npm install --production
  echo &quot;‚úÖ Server npm install done&quot;
else
  echo &quot;‚Üí Skipped npm install on server&quot;
fi

if [[ &quot;$UPDATE_ENV&quot; =~ ^[Yy]$ ]]; then
  echo &quot;üîß Opening .env for editing...&quot;
  nano .env
  echo &quot;‚úÖ .env updated&quot;
fi

if ! command -v pm2 &gt;/dev/null 2&gt;&amp;1; then
  echo &quot;‚ùå PM2 not found. Please install PM2 globally.&quot;
  exit 1
fi
echo &quot;‚úÖ PM2 found: $(pm2 -v)&quot;

if pm2 describe &#x27;$PM2_PROCESS&#x27; &gt;/dev/null 2&gt;&amp;1; then
  echo &quot;üîÑ Reloading PM2 process $PM2_PROCESS...&quot;
  pm2 reload &#x27;$PM2_PROCESS&#x27;
else
  echo &quot;‚ö†Ô∏è PM2 process not found. Starting new...&quot;
  pm2 start dist/src/app.js --name &#x27;$PM2_PROCESS&#x27;
fi

pm2 flush &#x27;$PM2_PROCESS&#x27;
echo &quot;üìú Showing PM2 logs (Ctrl+C to exit)&quot;
pm2 logs &#x27;$PM2_PROCESS&#x27;
EOF
</code></pre></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/docs/manual","query":{},"buildId":"6Q0J7OFGcBzm-2HOKiHsi","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>